<?xml version="1.0"?>

<!--
    THIS FILE SHOULD ENCRYPT SENSITIVE INFORMATION,
    PLEASE ENSURE BEFORE CHECKING INTO SOURCE CONTROL!

    This is a template for applying transforms when deploying to preview.ucosmic.com on Windows Azure.
    It is based on its sister file, Web.Release.config.

    When deploying to Azure, use the PKCS12ProtectedConfigurationProvider to encrypt sensitive sections:
    http://archive.msdn.microsoft.com/pkcs12protectedconfg
    http://blogs.msdn.com/b/sqlazure/archive/2010/09/07/10058942.aspx
    http://blogs.msdn.com/b/sqlazure/archive/2010/09/08/10059359.aspx
    http://blogs.msdn.com/b/sqlazure/archive/2010/09/09/10059889.aspx
    http://blogs.msdn.com/b/sqlazure/archive/2010/09/10/10060395.aspx

    For more information on using web.config transformation visit http://go.microsoft.com/fwlink/?LinkId=125889
-->

<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <configSections>
    <!-- Add AppFabric Caching Config Section when deploying to Azure -->
    <section name="dataCacheClients" type="Microsoft.ApplicationServer.Caching.DataCacheClientsSection, Microsoft.ApplicationServer.Caching.Core" allowLocation="true" allowDefinition="Everywhere" xdt:Transform="Replace" xdt:Locator="Match(name)" />
  </configSections>
  <configProtectedData xdt:Transform="Replace">
    <providers>
      <add name="CustomProvider" thumbprint="9975FCFAF342D1FB73631EB5A1CD9BCEF1F102F6"
          type="Pkcs12ProtectedConfigurationProvider.Pkcs12ProtectedConfigurationProvider, PKCS12ProtectedConfigurationProvider, Version=1.0.0.0, Culture=neutral, PublicKeyToken=34da007ac91f901d" />
    </providers>
  </configProtectedData>
  <dataCacheClients configProtectionProvider="CustomProvider" xdt:Transform="Replace">
    <EncryptedData Type="http://www.w3.org/2001/04/xmlenc#Element" xmlns="http://www.w3.org/2001/04/xmlenc#">
      <EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes192-cbc" />
      <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
        <EncryptedKey xmlns="http://www.w3.org/2001/04/xmlenc#">
          <EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5" />
          <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
            <KeyName>rsaKey</KeyName>
          </KeyInfo>
          <CipherData>
            <CipherValue>SUrdcwUm0e9Jo0aYzhliuBPFHQSTIiE4xgEg0oG0YlcBk0YmfHqKc6UXp8xgwwC/ucvV1NwstsxX/ynMKSlWSl302PFL67Fueh6vWncJ9s69ncW3LG9OhHGzlg5Ly+YPXty96dBhVgEtu/TzByjNHdAYPuJVJxRA087T8yMyg5E=</CipherValue>
          </CipherData>
        </EncryptedKey>
      </KeyInfo>
      <CipherData>
        <CipherValue>1+7jX4JKXUk5JEdqb+ZygLgj+AFL0LrIAqX5pqLG50CB6ChKlupeGaLpIliok5GxNwJF/CqaLBPXc0HCxqfKwJt8IG7ijJ8o4NYcDZBrriw0GwogYiK3pdsY8pB9h6LLJWlPaivBTdRztIn4D+oEj103J8+/75v0sjxSmhuW+jqX9aLHeS9dIkKpzsvinJjFokj/XJUzIqsLapPlZhvmN5wponHZ/1z8CpULDCJN3XmofLYO8eE4eYqdO4fxOBQTxsGNIb6PHgcCibBCd2zmfIMtdgWd2GXcIioz4uCk9rMJ7NlxM4pVLdc7A6nr+kT5X/M4qOPK+tSCZAWAHoGo1prfWFO7/Xk3df+iVhqvYtFlq/ckkFFr/TfDFBJagPJxGVjCfktQnlDw3+0XlQ5/iX2x/3V/0t+aOxq19oMXLZLnCgkCF+DE8wRJhySVFkGFOeKLqezcB52rFWp0HVT2RTw1n1x0KdDCw1nzgfr1x+EiCQwPcYvwcH3zQVB1zh/ot79tcVXmFnMDV9mGxx6f9TabKF9PskT8+4dz3Cr9Z0VWxAQMUCJH4VpWelqUmZP9g0eluc9dVcKpmooRE18/1svcYn1+FsbqiWI55BXzizQXCtCMMH+cwW60yaKn+xwWnwbQ/DVpEltK30/Robn4NeEC3/y90Cb/v/RGkjaED1iuCTMTzcZ0ce3sYjNJsXPuuqjTjaf97ObH5P+/YoAab2T247n/mqgDCAd94KjaIrGWkcgqDt2Sq0CqRNSsbThGBc4EQEIysGWYvdMTOXWs8Zk6mbmGzjp9F4sczzhuO5fn2I9oRzLvsIa3zqN5W+xig+3UDbZkZ7n/ezT40anoUVEeSxdfYPRsvRbKdtxaM6wuEcxLRm/Ya5QfA4+hfbctcu2qaAwS04ECwpw3oF09nAkJOsYmxZNNK1Pp9btA80hh0zkIrDzrO6zC70tl8tEIEEDKSockLd5LSDZKX9lbYXi4Ojcv7OKrBJ2n2JtV5zOEHVqNiA2INiQjiv8SDYQiSgfy6qZh2hnHjt2GQeY7RjR4t6dgCqRsgHKSfZDTs57zHP1UUYiJ26SFlCqT3X7vxr5DDqphqhUpdEWbBBnes9yBlkYssBSvH/Z5evas+DnLDJ9e0NmQ2fqCS9CW+fCcAgVs5kVbTdkYOwDqyu6itcztQnf092ltDtjVr4qTAht1jAltRuAbA6eClASEabN38GGdGRJJ14vBw+a6OKp7ObJBHskaiEVOyNlgvqpXLwzIAoVBSm5R589HCVCTpC2vDWXJ2rv84h+Nj4B0w+TUfQ==</CipherValue>
      </CipherData>
    </EncryptedData>
  </dataCacheClients>
  <connectionStrings configProtectionProvider="CustomProvider" xdt:Transform="Replace">
    <EncryptedData Type="http://www.w3.org/2001/04/xmlenc#Element"
        xmlns="http://www.w3.org/2001/04/xmlenc#">
      <EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes192-cbc" />
      <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
        <EncryptedKey xmlns="http://www.w3.org/2001/04/xmlenc#">
          <EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5" />
          <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
            <KeyName>rsaKey</KeyName>
          </KeyInfo>
          <CipherData>
            <CipherValue>QVqndvdQ3n98/8FMLqcZyOciPO+yjaGC2qElUOmLXVGMpaVsUv9Oygup5QcOgcosq5tL4BNWuLYCAEsNQ25psGHxE7X9OWEbyMWLswCMmu4YMOBHw7UiPcVhwNz9NLo0JjqDKEWawZlvJU/84UcdpKAUAm5D/dd3ovcIfMQ0WDM=</CipherValue>
          </CipherData>
        </EncryptedKey>
      </KeyInfo>
      <CipherData>
        <CipherValue>E7hGGPkBVqBdPKlxnZZwLM/JA4ARNEF9OPKHBt6/YVQpO2ikGO3GPiYZTnDUKPPnxnv8tjxOfs6tUGccNd6xvw3/A0QR/eiNA/iA1KZC7uEHc9r0xjW+bUOeOEggza6Gg7zvN96Kcu5zp6EXZ9Qb928bePHacEKFuMmNRhs4c6vpyt5uM4hobhJGKEhmFpXZGswrI4WY+uWE0N0j6D7wlTChof0kx65/Lb5hA+Z9oaMai5g3YnP99clrWbP9Z6n1ZESrFGzVYwkO3bPziJUzTMrnq04XUCJX4zaVKZQO0fcfncqwFpCEFz489nTlHg/9TH9/Ci6oVSDRkkCFc+79GnQ9W14HC5OGHtpucKdss9wu2Bnm/AC8RNMaa2snD4oVs0atfiO+oUOzp0/X9VKoGBDSJa1HMYsrWIsRI6zMnZalOI20HEkXZqGvNW2BOmNzseB4l0JEdMSfyDYRE8rbGAfLfLbgYshc0OJ9IbYfmOvAXU7Dk2a2zLut6daT9r/lMhL3XuSxPLRlGarzptss5ZtiU1xjLwhj8seTz/XCIdtf9w9wuSSmJ6uxFqXfJHBHK2B0/hwexMvRmvjh2QU/bGHkJFVf95zBleWKuDT34ZJ71b7niJKNwpBbcm9NUmwbV9sLox5JFdXLKEQX1I9raOWf7ZyWLKNueeHPSxqGsXxSC3Cw587mc4unRpmiR1aCemuXRQ5WO6ANEJNhOD+Sa4FEg9glYlFNmlq5N8egIdx96frlMi29OoIldR9msCrdIt8DvLGl4zE6IAd4cL3M3KbiQl1T+R47eBhcU+qim4TTX5vJQGO6qA+mq5q1YUE/4ksI69H/UeOh0L9JNzaPnA==</CipherValue>
      </CipherData>
    </EncryptedData>
  </connectionStrings>
  <appSettings configProtectionProvider="CustomProvider" xdt:Transform="Replace">
    <EncryptedData Type="http://www.w3.org/2001/04/xmlenc#Element" xmlns="http://www.w3.org/2001/04/xmlenc#">
      <EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes192-cbc" />
      <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
        <EncryptedKey xmlns="http://www.w3.org/2001/04/xmlenc#">
          <EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5" />
          <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
            <KeyName>rsaKey</KeyName>
          </KeyInfo>
          <CipherData>
            <CipherValue>uWWcsE2or5ogiMIfJ+gg7ZZFQQXKwYP/cauUTBv4V8poj62J74PvzCnBJy4wdzmI5yaHg+Ak7GJGQrDrirDDaRCyi/rzh9+NmGTswdqnW3HID7iHb1iProFRYtAbo8w6h2SMFJdm0kuZ6j6bARoTk11+YM/R1E0ZywhOiYCqW7k=</CipherValue>
          </CipherData>
        </EncryptedKey>
      </KeyInfo>
      <CipherData>
        <CipherValue>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</CipherValue>
      </CipherData>
    </EncryptedData>
  </appSettings>
  <system.web>
    <compilation xdt:Transform="RemoveAttributes(debug)" />
    <authentication mode="Forms">
      <forms timeout="2880" cookieless="UseCookies" requireSSL="true" domain="ucosmic.com" enableCrossAppRedirects="true" protection="All" path="/" ticketCompatibilityMode="Framework40" xdt:Transform="SetAttributes" />
    </authentication>
    <membership defaultProvider="AspNetSqlMembershipProvider" xdt:Transform="Replace">
      <providers>
        <clear />
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="true" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="preview.ucosmic.com" />
      </providers>
    </membership>
    <profile defaultProvider="AspNetSqlProfileProvider" xdt:Transform="Replace">
      <providers>
        <clear />
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="preview.ucosmic.com" />
      </providers>
    </profile>
    <customErrors mode="On" xdt:Transform="SetAttributes">
    </customErrors>
    <!-- Use AppFabric Caching for Session State -->
    <sessionState mode="Custom" customProvider="AppFabricCacheSessionStoreProvider" xdt:Transform="Replace">
      <providers>
        <add name="AppFabricCacheSessionStoreProvider" type="Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider, Microsoft.Web.DistributedCache" cacheName="default" useBlobMode="true" dataCacheClientName="SslEndpoint" />
      </providers>
    </sessionState>
    <!-- Use AppFabric Output Cache -->
    <caching xdt:Transform="Replace">
      <outputCache defaultProvider="DistributedCache">
        <providers>
          <add name="DistributedCache" type="Microsoft.Web.DistributedCache.DistributedCacheOutputCacheProvider, Microsoft.Web.DistributedCache" cacheName="default" dataCacheClientName="SslEndpoint" applicationName="preview.ucosmic.com" />
        </providers>
      </outputCache>
    </caching>
    <httpRuntime executionTimeout="1800" maxRequestLength="30720" xdt:Transform="Replace" />
  </system.web>
  <system.net>
    <mailSettings>
      <smtp configProtectionProvider="CustomProvider" xdt:Transform="Replace">
        <EncryptedData Type="http://www.w3.org/2001/04/xmlenc#Element"
            xmlns="http://www.w3.org/2001/04/xmlenc#">
          <EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes192-cbc" />
          <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
            <EncryptedKey xmlns="http://www.w3.org/2001/04/xmlenc#">
              <EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5" />
              <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
                <KeyName>rsaKey</KeyName>
              </KeyInfo>
              <CipherData>
                <CipherValue>PMA3PsJcpQbhstyex6pxH4aIIq1vfWojHF371A1Qf4rmmLA1eD5icRLrTwD6lr0pKtej3LqenCagyh5aMfGjVhKoi/MuFDV5TPt5wv6aqe8NUqnYHwtIFjQIPPdqVQWyb6/3DRxJQmTVlzFXfWsBpCvCaUZrr/XU5RrPYcria4I=</CipherValue>
              </CipherData>
            </EncryptedKey>
          </KeyInfo>
          <CipherData>
            <CipherValue>18/gjhnTpBVgvfp04p45SXZ7Mxyg3tLcfnqqimkM5SgPfjD2ruzOCRJhISsN9+yPMtJZSP5M8UsvQ8dt39o+D6JohVoJ7rkq3c/zy2gU7n6yUHmchdSok0MdEcsyT1P6qNsRNHsoMJMsEwETRFmDfK4GUnPkhcfYfDT5UYpksQg2/+VPtTJkq/09ZokmHWnnQ+6nIWCuk6guEXrHlX47Xw==</CipherValue>
          </CipherData>
        </EncryptedData>
      </smtp>
    </mailSettings>
  </system.net>
  <!-- Ensure Elmah is set up for the appropriate application and mail provider -->
  <elmah>
    <security allowRemoteAccess="yes" xdt:Transform="SetAttributes" />
    <errorLog applicationName="preview.ucosmic.com" xdt:Transform="SetAttributes" />
    <errorMail subject="Exception Report for preview.ucosmic.com" smtpPort="0" useSsl="true" xdt:Transform="SetAttributes" />
  </elmah>
  <system.webServer>
    <httpErrors errorMode="Custom" defaultResponseMode="ExecuteURL" xdt:Transform="SetAttributes">
    </httpErrors>
    <security>
      <requestFiltering>
        <!-- unlike httpRuntime maxRequestLength, maxAllowedContentLength is in bytes (25MB) -->
        <requestLimits maxAllowedContentLength="26214400" xdt:Transform="Replace" />
      </requestFiltering>
    </security>
  </system.webServer>
  <system.serviceModel>
    <client>
      <endpoint address="http://ws.geonames.org" binding="webHttpBinding" bindingConfiguration="NGeoBinding" contract="NGeo.GeoNames.IInvokeGeoNamesServices" behaviorConfiguration="NGeoBehavior" xdt:Transform="SetAttributes" xdt:Locator="Match(contract)" />
    </client>
    <behaviors>
      <endpointBehaviors>
        <behavior name="NGeoBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel>
  <system.diagnostics xdt:Transform="Replace">
    <trace>
      <listeners>
        <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics" name="AzureDiagnostics">
          <!-- Even though filter type causes a warning in VS (and ReSharper), it is required in Azure.
                        Do NOT remove the type="" attribute below unless you are deploying locally. -->
          <filter type="" />
        </add>
      </listeners>
    </trace>
  </system.diagnostics>
</configuration>
